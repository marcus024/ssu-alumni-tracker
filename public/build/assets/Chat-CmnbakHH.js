import{r as l,u,j as e,H as h}from"./app-Bn14kqFZ.js";import{A as g}from"./AdminLayout-DItyUeMY.js";import{P as f}from"./PrimaryButton-Btu8u2tE.js";function j({messages:a,auth:r}){const t=l.useRef(null),{data:d,setData:n,post:o,reset:c,processing:i}=u({message:""}),m=s=>{s.preventDefault(),o("/admin/chat",{onSuccess:()=>c("message")})};l.useEffect(()=>{t.current?.scrollIntoView({behavior:"smooth"})},[a]);const x=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return e.jsxs(g,{header:"Public Chat",children:[e.jsx(h,{title:"Public Chat"}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm rounded-lg flex flex-col h-[calc(100vh-16rem)]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.length>0?a.map(s=>e.jsx("div",{className:`flex ${s.user_id===r.user.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.user_id===r.user.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold",children:s.user?.name||"Unknown User"}),e.jsx("span",{className:`text-xs ${s.user_id===r.user.id?"text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:x(s.created_at)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:s.message})]})},s.id)):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No messages yet. Start the conversation!"})}),e.jsx("div",{ref:t})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d.message,onChange:s=>n("message",s.target.value),placeholder:"Type your message...",className:"flex-1 rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:i}),e.jsx(f,{type:"submit",disabled:i||!d.message.trim(),children:"Send"})]})})]})})]})}export{j as default};
