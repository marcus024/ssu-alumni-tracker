import{r as c,j as e,H as y,a as s}from"./app-3zeDucx5.js";import{A as j}from"./AdminLayout-B_CM-dYP.js";import{T as f,e as N}from"./exportHelpers-CPPmXxdQ.js";import"./TextInput-C6d8-aV8.js";const v={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",verified:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};function S({donations:r,filters:d={}}){const[n,l]=c.useState(d.search||""),[x,i]=c.useState(d.status||""),o=(t,a)=>{s.patch(route("admin.donations.updateStatus",t),{status:a})},p=t=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(t),m=t=>{l(t),s.get(route("admin.donations.index"),{search:t,status:x},{preserveState:!0})},h=t=>{i(t),s.get(route("admin.donations.index"),{search:n,status:t},{preserveState:!0})},g=()=>{l(""),i(""),s.get(route("admin.donations.index"))},u=()=>{const t=r.data.map(a=>({donor_name:a.donor_name,donor_phone:a.donor_phone,donor_address:a.donor_address,campaign:a.fund_raising?.title||"",amount:a.amount,status:a.status,date:new Date(a.created_at).toLocaleDateString()}));N(t,["donor_name","donor_phone","donor_address","campaign","amount","status","date"],"donations")};return e.jsxs(j,{header:"Donations Management",children:[e.jsx(y,{title:"Donations"}),e.jsx(f,{searchValue:n,onSearchChange:m,searchPlaceholder:"Search by donor name or phone...",filters:[{name:"status",label:"Filter by Status",value:x,onChange:h,options:[{value:"pending",label:"Pending"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"}]}],onExport:u,onClear:g}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Donor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Receipt"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.data.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.donor_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.donor_phone})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.fund_raising?.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:p(t.amount)})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.donor_phone}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.donor_address})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:t.status,onChange:a=>o(t.id,a.target.value),className:`px-2 py-1 text-xs font-semibold rounded-full ${v[t.status]}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("a",{href:`/uploads/${t.receipt_path}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",children:"View Receipt"})})]},t.id))})]})}),r.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 text-center",children:["Showing ",r.data.length," of ",r.total," donations"]})}),r.data.length===0&&e.jsx("div",{className:"px-6 py-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No donations yet."})})]})]})}export{S as default};
